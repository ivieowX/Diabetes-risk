/* ───────────────── Base & Tailwind ───────────────── */
@import "tailwindcss";

/* Google Font: Prompt */
@import url("https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap");

html, body, #root {
  height: 100%;
  font-family: "Prompt", ui-sans-serif, system-ui, -apple-system, "Segoe UI",
    Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji",
    "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
}

/* Render & fallback background (เมื่อ gradient ไม่ทำงาน) */
body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  background-color: #f8fafc;
}

/* ───────────────── CSS Variables ───────────────── */
:root{
  --ring-strong: 0 0 0 3px rgba(99,102,241,0.15); /* indigo */
  --shadow-soft: 0 10px 25px -10px rgba(2,6,23,0.15); /* slate-950 */
}

/* ───────────────── Reusable Components ───────────────── */
.card{
  border-radius: 1.25rem;                      /* rounded-2xl */
  background: #fff;
  border: 1px solid rgba(15,23,42,0.08);       /* slate-900/8% */
  box-shadow: var(--shadow-soft);
}

/* Soft focus ring (เวลาไม่ใช้ ring ของ Tailwind) */
button:focus-visible,
a:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible{
  outline: none;
  box-shadow: var(--ring-strong);
  border-radius: 0.75rem;
}

/* สกอร์บาร์แบบ gradient */
.progress-gradient{ background-image: linear-gradient(90deg,#6366f1,#38bdf8); }

/* Blob/ไอคอนลอยเบา ๆ */
@keyframes floaty{
  0%{transform:translateY(0)}
  50%{transform:translateY(-6px)}
  100%{transform:translateY(0)}
}
.floaty{ animation: floaty 6s ease-in-out infinite; }

/* Scrollbar (WebKit + Firefox) */
*{ scrollbar-width: thin; scrollbar-color: #c7d2fe #f1f5f9; }
*::-webkit-scrollbar{ width:10px; height:10px; }
*::-webkit-scrollbar-thumb{
  background-color:#c7d2fe; border-radius:9999px; border:2px solid #f1f5f9;
}
*::-webkit-scrollbar-track{ background-color:#f1f5f9; }

/* Utilities */
.u-shadow-soft{ box-shadow: var(--shadow-soft); }
.u-glass{
  backdrop-filter: saturate(150%) blur(8px);
  background: rgba(255,255,255,.65);
  border: 1px solid rgba(15,23,42,0.06);
}

/* Soft border โดยรวม (บนจอ) */
.border, .ring-1{ border-color: rgba(148,163,184,0.6); } /* slate-400/60 */

/* Theme toggles (ผ่าน <html data-theme="...">) */
html[data-theme="emerald"]{ --ring-strong: 0 0 0 3px rgba(16,185,129,0.18); }
html[data-theme="rose"]{ --ring-strong: 0 0 0 3px rgba(244,63,94,0.18); }

/* ผู้ใช้ต้องการลดแอนิเมชัน */
@media (prefers-reduced-motion: reduce){
  *{
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
    scroll-behavior: auto !important;
  }
}

/* ───────────────── Print: A4 • One-page • Hide Navbar ───────────────── */
@media print {
  @page{
    size: A4;
    /* ปรับได้ 8–16mm ตามเนื้อหาจริง */
    margin: 10mm;
  }

  html, body{
    background:#fff !important;
    color:#111 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  /* ซ่อนส่วน UI ที่ไม่ต้องพิมพ์ */
  .no-print,
  .u-navbar,
  .u-actionbar,
  .u-screen-only{ display: none !important; }

  /* บีบให้พอดีหน้าเดียว (Chrome/Edge ใช้ zoom; มี transform เป็น fallback) */
  .print-onepage{
    zoom: 0.92;                      /* ปรับ 0.85–0.95 ตามความยาวจริง */
    transform: scale(0.92);
    transform-origin: top left;
    width: calc(100% / 0.92);
  }

  /* การ์ดรวมผล */
  .print-sheet{
    background:#fff !important;
    box-shadow:none !important;
    border:0 !important;
    padding:0 !important;
  }

  /* ส่วนย่อยในรายงาน (กันถูกตัดครึ่ง) */
  .print-section{
    break-inside: avoid;
    page-break-inside: avoid;
    margin-bottom:14px;
    border:1px solid #e5e7eb; /* slate-200 */
    border-radius:12px;
    padding:14px;
  }

  /* Title / Meta */
  .print-title{ font-size:18pt; font-weight:700; letter-spacing:0.2px; }
  .print-subtitle{ font-size:10pt; color:#64748b; }          /* slate-500 */
  .print-kpi{ font-size:26pt; font-weight:800; color:#0f172a; } /* slate-900 */
  .print-hint{ font-size:9pt; color:#6b7280; }                /* gray-500 */

  /* Progress (โทนอ่อน ประหยัดหมึก) */
  .print-progress{
    height:10px; border-radius:9999px; background:#e5e7eb !important; overflow:hidden;
  }
  .print-progress > span,
  .print-progress > div{
    display:block; height:100%; background:#60a5fa !important; /* sky-400 */
  }

  /* ตาราง Key/Value */
  .print-kv{
    display:grid; grid-template-columns: 1fr auto; gap:6px 12px;
    font-size:11pt; align-items:baseline;
  }
  .print-kv .k{ color:#6b7280; }                     /* gray-500 */
  .print-kv .v{ color:#111827; font-weight:600; }    /* gray-900 */

  /* Risk chip (โทนอ่อน) */
  .print-chip{
    border:1px solid #c7d2fe;  /* indigo-200 */
    background:#eef2ff;        /* indigo-50 */
    color:#1e40af;             /* indigo-800 */
    padding:4px 10px; border-radius:9999px; font-weight:600; font-size:10pt;
  }

  /* Footer */
  .print-footer{
    margin-top:10mm; font-size:9pt; color:#6b7280;
    display:flex; justify-content:space-between;
  }

  /* ตัดเงา/gradient หนัก ๆ ตอนพิมพ์ */
  .u-shadow-soft, .card, .progress-gradient{ box-shadow:none !important; background-image:none !important; }
  .no-print-gradient{ background:#fff !important; }
}
